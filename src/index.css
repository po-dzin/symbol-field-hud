@import "tailwindcss";
@config "../tailwind.config.js";

:root {
  font-family: Inter, system-ui, Avenir, Helvetica, Arial, sans-serif;
  line-height: 1.5;
  font-weight: 400;

  color-scheme: dark;

  /* Default (Deep/Flow) - Dark Mode */
  --text-primary: #FFFFFF;
  --text-secondary: #B4B9C1;
  --text-meta: #6B7280;

  color: var(--text-primary);
  background-color: theme('colors.os-dark');

  /* Disable text selection globally */
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;

  /* Z-Index Hierarchy (v0.37) */
  --z-background: 0;
  --z-canvas: 10;
  --z-core-overlays: 20;
  --z-windows: 100;
  /* Windows start at 100 and stack up */
  --z-xp-summary: 2000;
  /* Above windows */
  --z-trinity: 5000;
  /* Always on top */
  --z-ritual: 6000;
}

/* DEEP Mode (Default Dark) */
.mode-deep {
  /* Surface-1 System (v0.308) */
  --surface-1-bg: hsla(210, 18%, 8%, 0.92);
  --surface-1-stroke: hsla(190, 60%, 60%, 0.75);
  --surface-1-glow-opacity: 0.75;

  --surface-highlight: rgba(255, 255, 255, 0.08);
  --surface-dim: rgba(0, 0, 0, 0.5);

  /* v0.309.3 - Boosted contrast */
  --panel-bg: rgba(4, 7, 10, 0.96);
  --panel-stroke-enhanced: rgba(170, 210, 225, 0.55);
  --panel-glow-opacity: 0.75;
}

/* FLOW Mode */
.mode-flow {
  --surface-1-bg: hsla(220, 20%, 13%, 0.72);
  --surface-1-stroke: hsla(190, 60%, 60%, 0.4);
  --surface-1-glow-opacity: 0.35;

  /* v0.309.3 - Crystalline feel */
  --canvas-bg: hsl(215, 22%, 10%);
  --panel-bg: hsl(215, 24%, 14%, 0.8);
  --grid-opacity: 0.22;
}

/* Unified Panel Borders (v0.309.2) - Static across all modes */
:root {
  --panel-stroke-width: 1.3px;
  --panel-radius: 24px;
}

/* Breathing Animations (v0.309.3) */
@keyframes softBreath {

  0%,
  100% {
    opacity: 0.85;
    transform: scale(1);
  }

  50% {
    opacity: 1;
    transform: scale(1.04);
  }
}

@keyframes liquidPrism {
  0% {
    filter: hue-rotate(0deg) brightness(1);
  }

  50% {
    filter: hue-rotate(180deg) brightness(1.2);
  }

  100% {
    filter: hue-rotate(360deg) brightness(1);
  }
}

@keyframes breathingCrown {

  0%,
  100% {
    opacity: 0.75;
    transform: scale(1);
  }

  50% {
    opacity: 1;
    transform: scale(1.03);
  }
}

@keyframes pulse-glow-soft {

  0%,
  100% {
    opacity: 0.3;
    transform: scale(1);
  }

  50% {
    opacity: 0.6;
    transform: scale(1.08);
  }
}

/* LUMA Mode - Light Mode Overrides */
.mode-luma {
  color-scheme: light;

  /* Text: Dark Warm (#2a2620) */
  --text-primary: #2a2620;
  --text-secondary: #5b5349;
  --text-meta: #786e5f;

  /* Surface-1 System (v0.308) */
  --surface-1-bg: hsla(38, 32%, 84%, 0.86);
  --surface-1-stroke: hsla(190, 35%, 40%, 0.6);
  --surface-1-glow-opacity: 0.35;

  /* Borders: Dark Teal/Neutral (#325a5b) - Legacy support if needed */
  --surface-1-border: var(--surface-1-stroke);

  --surface-highlight: rgba(255, 255, 255, 0.2);
  --surface-dim: rgba(42, 38, 32, 0.1);
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
  background: radial-gradient(circle at 50% 50%, #1a1a24 0%, #0a0a0c 100%);
  overflow: hidden;
  /* App-like feel */
}

/* Glassmorphism Utilities */
.glass-panel {
  @apply bg-os-glass-bg backdrop-blur-xl border border-os-glass-border rounded-2xl;
}

.glass-panel-hover {
  @apply transition-colors duration-300;
}

.glass-panel-hover:hover {
  background-color: rgba(255, 255, 255, 0.05);
}

/* Custom scrollbar for webkit browsers */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.2);
}

::-webkit-scrollbar-thumb {
  background: rgba(117, 205, 205, 0.3);
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: rgba(117, 205, 205, 0.5);
}

/* Allow text selection in specific areas */
.selectable-text,
.selectable-text * {
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

/* Glass morphism utility */
@keyframes breathe {

  0%,
  100% {
    opacity: 0.3;
    transform: scale(1);
  }

  50% {
    opacity: 0.6;
    transform: scale(1.05);
  }
}

.animate-breathe {
  animation: breathe 4s ease-in-out infinite;
}

@keyframes pulse-glow-soft {

  0%,
  100% {
    box-shadow:
      0 0 10px var(--glow-color),
      0 0 20px var(--glow-color),
      inset 0 0 5px var(--glow-color);
    opacity: 0.8;
  }

  50% {
    box-shadow:
      0 0 15px var(--glow-color),
      0 0 30px var(--glow-color),
      inset 0 0 10px var(--glow-color);
    opacity: 1;
  }
}

/* Smooth 8s breath cycle - synchronized across all panels */
@keyframes pulse-glow-smooth {

  0%,
  100% {
    box-shadow:
      0 0 5px var(--glow-color),
      0 0 10px var(--glow-color);
    opacity: 0.85;
  }

  50% {
    box-shadow:
      0 0 8px var(--glow-color),
      0 0 14px var(--glow-color);
    opacity: 1;
  }
}

.animate-pulse-soft {
  animation: pulse-glow-soft 3s ease-in-out infinite;
}

.animate-pulse-glow {
  animation: glowPulse 4s ease-in-out infinite;
}

@keyframes glowPulse {

  0%,
  100% {
    box-shadow: inset 0 0 20px black, 0 0 5px rgba(117, 205, 205, 0.3);
  }

  50% {
    box-shadow: inset 0 0 20px black, 0 0 20px rgba(117, 205, 205, 0.6);
  }
}

@keyframes materialize {
  0% {
    opacity: 0;
    transform: scale(0.1);
    filter: blur(20px);
  }

  50% {
    opacity: 0.8;
    transform: scale(1.1);
    filter: blur(10px);
  }

  100% {
    opacity: 1;
    transform: scale(1);
    filter: blur(0);
  }
}

.animate-materialize {
  animation: materialize 1.2s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

/* Source Node Animations */
@keyframes source-pulse {

  0%,
  100% {
    opacity: 0.6;
    /* Reduced amplitude (was 0.3) */
    transform: scale(1);
    /* Fixed size */
  }

  50% {
    opacity: 1;
    transform: scale(1);
    /* Fixed size */
  }
}

.animate-source-pulse {
  animation: source-pulse 4s ease-in-out infinite;
}

@keyframes source-ping-large {
  0% {
    transform: scale(1);
    opacity: 0.3;
  }

  50% {
    transform: scale(2);
    opacity: 0.15;
  }

  100% {
    transform: scale(2.22);
    opacity: 0;
  }
}

.animate-source-ping-large {
  animation: source-ping-large 4s cubic-bezier(0, 0, 0.2, 1) infinite;
}

@keyframes wave-pulse {
  0% {
    transform: scale(1);
    opacity: 0.8;
    border-width: 1.5px;
  }

  100% {
    transform: scale(3);
    opacity: 0;
    border-width: 0px;
  }
}

.animate-wave {
  animation: wave-pulse 3s ease-out infinite;
}

/* Onboarding Tooltip Animation */
@keyframes fade-scale {
  0% {
    opacity: 0;
    transform: translate(-50%, -10px) scale(0.95);
  }

  10%,
  90% {
    opacity: 1;
    transform: translate(-50%, 0) scale(1);
  }

  100% {
    opacity: 0;
    transform: translate(-50%, 10px) scale(0.95);
  }
}

.animate-fade-scale {
  animation: fade-scale 2s ease-in-out forwards;
}

@keyframes crystallize {
  0% {
    opacity: 0;
    transform: scale(0.2) rotate(45deg);
    border-radius: 10%;
    filter: blur(10px);
  }

  40% {
    opacity: 0.8;
    transform: scale(1.1) rotate(10deg);
    border-radius: 30%;
    filter: blur(5px);
  }

  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
    border-radius: 50%;
    filter: blur(0);
  }
}

.animate-crystallize {
  animation: crystallize 1.5s cubic-bezier(0.22, 1, 0.36, 1) forwards;
}

@keyframes dash-flow {
  to {
    stroke-dashoffset: -1000;
  }
}

@keyframes move-along-path {
  from {
    offset-distance: 0%;
  }

  to {
    offset-distance: 100%;
  }
}

@keyframes move-and-dissolve {
  0% {
    offset-distance: 0%;
    opacity: 1;
    transform: scale(1);
  }

  70% {
    opacity: 1;
    transform: scale(1);
  }

  100% {
    offset-distance: 100%;
    opacity: 0;
    transform: scale(0.2);
  }
}

@keyframes lidar-scan {
  0% {
    background-position: 0% 0%;
    opacity: 0.3;
  }

  50% {
    opacity: 0.6;
  }

  100% {
    background-position: 0% 100%;
    opacity: 0.3;
  }
}

.animate-lidar {
  animation: lidar-scan 3s linear infinite;
}

@keyframes liquid-flow {
  0% {
    border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
    background-size: 100% 100%;
  }

  50% {
    border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%;
    background-size: 120% 120%;
  }

  100% {
    border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
    background-size: 100% 100%;
  }
}

.animate-liquid {
  animation: liquid-flow 8s ease-in-out infinite;
}

@keyframes joy-glow {

  0%,
  100% {
    filter: brightness(1) drop-shadow(0 0 15px currentColor);
  }

  50% {
    filter: brightness(1.4) drop-shadow(0 0 30px currentColor);
  }
}

.animate-joy {
  animation: joy-glow 2s ease-in-out infinite;
}

@keyframes joy-vibrate {

  0%,
  100% {
    transform: translate(0, 0);
  }

  10% {
    transform: translate(-1px, 1px);
  }

  20% {
    transform: translate(1px, -1px);
  }

  30% {
    transform: translate(-1px, -1px);
  }

  40% {
    transform: translate(1px, 1px);
  }

  50% {
    transform: translate(-1px, 0px);
  }

  60% {
    transform: translate(1px, 0px);
  }

  70% {
    transform: translate(0px, -1px);
  }

  80% {
    transform: translate(0px, 1px);
  }

  90% {
    transform: translate(-1px, 1px);
  }
}

.animate-vibrate {
  animation: joy-vibrate 0.3s ease-in-out infinite;
}

@keyframes core-ring-breathe {

  0%,
  100% {
    opacity: 0.3;
    transform: scale(1);
    filter: blur(0px) brightness(1);
    box-shadow: 0 0 30px currentColor;
  }

  50% {
    opacity: 0.6;
    transform: scale(1.05);
    filter: blur(1px) brightness(1.3);
    box-shadow: 0 0 60px currentColor;
  }
}

.animate-core-breathe {
  animation: core-ring-breathe 4s ease-in-out infinite;
}

@keyframes core-ring-morph {

  0%,
  100% {
    border-radius: 50%;
  }

  25% {
    border-radius: 45% 55% 50% 50% / 50% 50% 45% 55%;
  }

  50% {
    border-radius: 50% 50% 45% 55% / 55% 45% 50% 50%;
  }

  75% {
    border-radius: 55% 45% 50% 50% / 50% 50% 55% 45%;
  }
}

.animate-core-morph {
  animation: core-ring-morph 8s ease-in-out infinite;
}